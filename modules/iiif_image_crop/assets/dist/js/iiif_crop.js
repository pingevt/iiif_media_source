!function(){"use strict";!function(){const i={NODE_ENV:"production"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,i)}catch(i){}globalThis.process={env:i}}(),function(i,e){e.behaviors.iiifCrop={attach:function(e){once("iiif-crop-hide-field",".crop",e).forEach((function(e){var t=i(e).closest(".crop-wrapper");i(e).hasClass("error")||(t.addClass("visually-hidden"),i(e).on("focus",(function(){t.removeClass("visually-hidden")})).on("blur",(function(){t.addClass("visually-hidden")})))})),once("iiif-crop-cropper",".field--widget-iiif-image-crop-widget .cropper-image > img.iiif-crop-img:not(.cropper-hidden), .field--widget-iiif-image-widget .cropper-image > img.iiif-crop-img:not(.cropper-hidden)",e).forEach((i=>{console.log("h",i);let e=i.closest(".field--type-iiif-id").querySelector(".crop-wrapper input"),t=!1;new Cropper(i,{viewMode:2,scalable:!1,rotatable:!0,dragMode:"move",zoomable:!1,ready(){let i=e.value.split(","),r=this.cropper.getImageData(),o={x:i[0]/100*r.naturalWidth,y:i[1]/100*r.naturalHeight,width:i[2]/100*r.naturalWidth,height:i[3]/100*r.naturalHeight};this.cropper.setData(o),t=!0},crop(i){if(t){let t=this.cropper.getImageData(),r=i.detail.x/t.naturalWidth*100,o=i.detail.y/t.naturalHeight*100,a=i.detail.width/t.naturalWidth*100,c=i.detail.height/t.naturalHeight*100,n=[r.toFixed(2),o.toFixed(2),a.toFixed(2),c.toFixed(2)];e.value=n.join(",")}}})}))}}}(jQuery,Drupal)}();